@charset 'utf-8';
@use './global' as *;

// =============================
// 管理画面 - 投稿のエディタ
// =============================
.c-single__content,
.wp-editor.post-type-post {
  --text-spacing: 24px;
  --strong-text-color: var(--clr_primary, #1abfa4);
  --marker-bg-color: #ff0;
  --link-text-color: var(--clr_link, #004ec9);

  @include mq(large) {
    --text-spacing: 32px;
  }

  //引用アイコンsvg
  --icon-blockquote: url('data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 23.87 20.86"><path d="M9.38,47.4A4.243,4.243,0,0,1,5.7,45.58a8.99,8.99,0,0,1-1.3-5.25,14.735,14.735,0,0,1,2.17-8.05,17.444,17.444,0,0,1,6.16-5.74l1.82,3.01a15.319,15.319,0,0,0-4.41,4.2,10.137,10.137,0,0,0-1.47,5.67l.91,5.18L6.3,40.54a6.075,6.075,0,0,1,1.435-1.015A3.83,3.83,0,0,1,9.38,39.21a4.408,4.408,0,0,1,2.835.98,3.539,3.539,0,0,1,1.225,2.94,4.184,4.184,0,0,1-1.155,3.15A4,4,0,0,1,9.38,47.4Zm13.72,0a4.176,4.176,0,0,1-3.605-1.82,8.99,8.99,0,0,1-1.3-5.25,14.919,14.919,0,0,1,2.135-8.05,16.986,16.986,0,0,1,6.2-5.74l1.75,3.01a15.6,15.6,0,0,0-4.34,4.2,10.137,10.137,0,0,0-1.47,5.67l.84,5.18-3.22-4.06a4.815,4.815,0,0,1,1.4-1.015,3.887,3.887,0,0,1,1.61-.315,4.55,4.55,0,0,1,2.87.98,3.494,3.494,0,0,1,1.26,2.94,4.184,4.184,0,0,1-1.155,3.15A4.1,4.1,0,0,1,23.1,47.4Z" transform="translate(-4.41 -26.54)" fill="%23dbdbdb" /></svg>');
  //外部リンクアイコンsvg
  --icon-outer-link: url('data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13"><g transform="translate(-1091 -2951)"><g transform="translate(1091 2954)" fill="none" stroke="%23004ec9" stroke-width="1"><rect stroke="none" /><rect x="0.5" y="0.5" width="9" height="9" fill="none" /></g><g transform="translate(1 5)"><g transform="translate(1093 2946)" fill="%23fff" stroke="%23004ec9" stroke-width="1"><rect width="10" height="1" stroke="none" /><rect x="0.5" y="0.5" width="9" fill="none" /></g><g transform="translate(1103 2946) rotate(90)" fill="%23fff" stroke="%23004ec9" stroke-width="1"><rect width="10" height="1" stroke="none" /><rect x="0.5" y="0.5" width="9" fill="none" /></g></g></g></svg>');

  overflow: hidden;
  > * {
    margin-top: var(--text-spacing);
    &:first-child {
      margin-top: 0;
    }
  }

  //タイトル
  h2,
  h3,
  h4,
  h5,
  h6 {
    clear: both;
    @include font_title;
  }
  h2 {
    margin-top: 50px;
    font-size: clamp(1.375rem, 1.125rem + 0.71vw, 1.75rem);
  }
  h3 {
    margin-top: 40px;
    font-size: clamp(1.25rem, 1.083rem + 0.48vw, 1.5rem);
  }
  h4 {
    margin-top: 32px;
    font-size: clamp(1.125rem, 1.042rem + 0.24vw, 1.25rem);
  }
  h5,
  h6 {
    margin-top: 30px;
    font-size: 1em;
  }

  //リスト
  ul:not(.toc_list),
  ol:not(.toc_list) {
    display: flex;
    flex-direction: column;
    gap: 8px;
    list-style: none;
  }
  & > ul:not(.toc_list),
  & > ol:not(.toc_list) {
    margin-top: var(--text-spacing);

    &:first-child {
      margin-top: 0;
    }
  }

  ol:not(.toc_list) {
    counter-reset: item;

    & > li {
      padding-left: 25px;
      &:not(:has(ul, ol)) {
        position: relative;
        counter-increment: item;

        &::before {
          content: counter(item) '. ';
          @include font_en;
          color: var(--clr_primary);
          font-size: 1em;
          position: absolute;
          top: 0;
          left: 0;
        }
      }
    }
  }
  ul:not(.toc_list) {
    & > li {
      padding-left: 18px;
      &:not(:has(ul, ol)) {
        position: relative;
        &::before {
          content: '';
          width: 6px;
          height: 1px;
          background-color: currentColor;
          position: absolute;
          left: 0;
          top: calc(1em * 1.9 / 2 - 1px);
          top: calc(1lh / 2 - 1px);
        }
      }
    }
  }

  //引用
  blockquote {
    position: relative;
    padding: 32px 48px;
    background: var(--clr_bg);
    z-index: 1;

    &::before {
      content: '';
      width: 24px;
      height: 24px;
      background: var(--icon-blockquote) no-repeat center / contain;
      position: absolute;
      top: 12px;
      left: 12px;
      z-index: -1;
    }
  }

  //強調
  strong,
  b {
    color: var(--strong-text-color);
    font-weight: 700;

    mark {
      font-weight: 700;
    }
  }

  //リンク
  a {
    color: var(--link-text-color);
    text-decoration: underline;
    text-underline-offset: 2px;
    @include hover {
      text-decoration: none;
    }

    &[target='_blank']:not(:has(img)) {
      &::after {
        margin-left: 4px;
        margin-right: 4px;
        content: '';
        width: 14px;
        height: 14px;
        display: inline-block;
        background-color: var(--link-text-color);
        mask: var(--icon-outer-link) no-repeat center center / contain;
      }
    }
  }

  //マーカー
  mark {
    padding-inline: 2px;
    font-weight: 400;
    background: var(--marker-bg-color);
  }

  //画像
  img {
    display: block;
    margin-inline: auto;
    width: fit-content;
    max-width: 100%;
  }

  //テーブル
  .js-scrollable {
    overflow-x: scroll;
  }
  table {
    border: 1px solid var(--clr_border);
    thead {
      th {
        background: var(--clr_primary);
        color: #fff;
      }
    }
    th,
    td {
      width: auto !important;
      padding: 15px 20px;
      border: 1px solid var(--clr_border);
    }
    th {
      background: var(--clr_bg);
    }
  }

  //配置
  .aligncenter {
    margin-inline: auto;
    display: block;
    float: none;
  }
  .alignleft {
    margin-inline: 0px auto;
    display: block;
    float: none;
  }
  .alignright {
    margin-inline: auto 0px;
    display: block;
    float: none;
  }

  //画像横並び
  .-flex-img {
    display: grid;
    gap: var(--text-spacing);
  }

  // メディアクエリ
  // =============================
  @include mqUnder(1024) {
    table {
      th,
      tr:not(:last-of-type) td,
      tr:last-of-type td:not(:last-of-type) {
        border-bottom: none;
      }

      th,
      td {
        display: block;
        width: 100% !important;
      }
    }
  }

  @include mq(large) {
    h2 {
      margin-top: 60px;
    }
    h3 {
      margin-top: 50px;
    }
    h4 {
      margin-top: 40px;
    }
    //引用
    blockquote {
      padding: 32px 60px;
      &::before {
        width: 26px;
        height: 26px;
      }
    }

    //画像横並び
    .-flex-img {
      &.-col2 {
        grid-template-columns: repeat(2, 1fr);
      }
      &.-col3 {
        grid-template-columns: repeat(3, 1fr);
      }
    }
  }
}


// ============================================
//  目次
// ============================================
.c-single__content,
.wp-editor.post-type-post {
  #toc_container{
    width: 100%;
    padding: 32px;
    background-color: var(--clr_bg);
    border: 0;
    .toc_title{
      margin-bottom: 16px;
      text-align: left;
      @include font_title;
    }
    .toc_list{
      //h2
      li{
        &:nth-child(n+2){
          margin-top: 8px;
        }
      }
      //h3
      ul{
        margin-left: 24px;
        li{
          margin-top: 8px;
        }
      }

      .toc_number{
        @include font_en;
      }
      a{
        display: block;
        text-decoration: none;
        color: var(--clr_default);
      }
      .toc_depth_2{
        display: none;
      }
    }
  }
  @include mq (large){
    #toc_container{
      padding: 40px 32px;
    }
  }
}